show running-config

!<mim>

!configuration saved at 04:36:42 Fri Dec 11 2020 by write zdb

!configuration saved at 07:43:02 Sun Dec 6 2020 by write txt

!last configuration change at 07:42:30 Sun Dec 6 2020 by he_wgtest

commit-mode default automatic

!</mim>

!<system-config>

hostname LIENO-201N-2J-EC9O3IE-WQ-I001
load-mode txt

nvram boot-server 158.8.0.186
nvram boot-server ipv6 A888::9
nvram default-gateway 158.8.0.186
nvram default-gateway ipv6 A888::9
nvram boot-username upp

nvram ftp-path /

!</system-config>

!<nsr-config>

nsr service all

!</nsr-config>

!<vrf>

ip vrf 5G_RAN

  rd 64520:10010

  mpls label mode ipv6 per-vrf

  mpls label mode per-vrf

  address-family ipv4

    route-target import 64520:10010

    route-target export 64520:10010

  $

  address-family ipv6

    route-target export 64520:10010

    route-target import 64520:10010

  $

$

ip vrf 5G_RAN_VIP

  rd 64520:10020

  mpls label mode ipv6 per-vrf

  mpls label mode per-vrf

  address-family ipv4

    route-target import 64520:10020

    route-target export 64520:10020

  $

  address-family ipv6

    route-target export 64520:10020

    route-target import 64520:10020

  $

$

ip vrf 5G_OAM

  rd 64520:10030

  mpls label mode ipv6 per-vrf

  mpls label mode per-vrf

  address-family ipv4

    route-target import 64520:10030

    route-target export 64520:10030

  $

  address-family ipv6

    route-target export 64520:10030

    route-target import 64520:10030

  $

$

ip vrf 5GC_MGMN

  rd 64520:10050

  mpls label mode per-vrf

  mpls label mode ipv6 per-vrf

  address-family ipv4

    route-target export 64520:10050

    route-target import 64520:10050

  $

  address-family ipv6

    route-target export 64520:10050

    route-target import 64520:10050

  $

$

ip vrf GPRS_Gn_C

  rd 64520:10040

  mpls label mode per-vrf

  mpls label mode ipv6 per-vrf

  address-family ipv4

    route-target export 64520:10040

    route-target import 64520:10040

  $

  address-family ipv6

    route-target export 64520:10040

    route-target import 64520:10040

  $

$

ip vrf SmartMAN_AUTO_ONLINE

  rd 64520:10080

  mpls label mode per-vrf

  address-family ipv4

    route-target export 64520:10080

    route-target import 64520:10080

  $

$

ip vrf 4G_OAM

  rd 64520:18030

  mpls label mode per-vrf

  address-family ipv4

    route-target import 64520:18030

    route-target export 64520:18030

  $

$

ip vrf 4G_RAN

  rd 64520:18020

  mpls label mode per-vrf

  address-family ipv4

    route-target import 64520:18020

    route-target export 64520:18020

  $

$

ip vrf 3G_RAN

  rd 64520:18040

  mpls label mode per-vrf

  address-family ipv4

    route-target import 64520:18040

    route-target export 64520:18040

  $

$

!</vrf>

!<if-intf>

interface cgei-0/0/0/1

  no shutdown

$

interface cgei-0/0/0/1.1000

   description to HEZJK-CKL-2F-ZX9K8EA-SM-C1
  mtu 9050

  ip mtu 9000

  ip address 138.75.0.16 255.255.255.252
  mpls mtu 9000

$

interface cgei-0/0/0/2

$

interface cgei-0/0/0/3

$

interface spi-0/0/0/1

$

interface xgei-0/0/1/1

  no shutdown

$

interface xgei-0/0/1/1.1

   description to_HIENO-DIWLN-EC6180L-WQ-QEV1
  mtu 9050

  ip mtu 9000

  ip address 138.75.2.85 255.255.255.252
  mpls mtu 9000

$

interface xgei-0/0/1/1.4094

  ip vrf forwarding SmartMAN_AUTO_ONLINE

$

interface xgei-0/0/1/2

  no shutdown

$

interface xgei-0/0/1/2.2

   description to_HIENO-HCD-EC6180L-WQ-QEV1
  mtu 9050

  ip mtu 9000

  ip address 138.75.2.179 255.255.255.252
  mpls mtu 9000

$

interface xgei-0/0/1/2.4094

  ip vrf forwarding SmartMAN_AUTO_ONLINE

$

interface xgei-0/0/1/3

  no shutdown

$

interface xgei-0/0/1/4

$

interface xgei-0/0/1/5

$

interface xgei-0/0/1/6

$

interface xgei-0/0/1/7

$

interface xgei-0/0/1/8

$

interface xgei-0/0/1/9

$

interface xgei-0/0/1/10

$

interface xgei-0/0/1/11

$

interface xgei-0/0/1/12

$

interface xgei-0/0/1/13

$

interface xgei-0/0/1/14

$

interface xgei-0/0/1/15

$

interface xgei-0/0/1/16

$

interface xgei-0/0/1/17

$

interface xgei-0/0/1/18

$

interface xgei-0/0/1/19

$

interface xgei-0/0/1/20

$

interface xgei-0/0/1/21

$

interface xgei-0/0/1/22

  no shutdown

$

interface xgei-0/0/1/22.1

   description to_HIENO-OPHDE-EC6180L-WQ-QEV1
  mtu 9050

  ip mtu 9000

  ip address 138.75.2.281 255.255.255.252
  mpls mtu 9000

$

interface xgei-0/0/1/23

$

interface xgei-0/0/1/24

$

interface spi-0/0/1/1

$

interface cgei-0/1/0/1

  no shutdown

$

interface cgei-0/1/0/1.1

   description to HEZJK-201J-1F-ZX9K3EA-SM-E2
  mtu 9050

  ip mtu 9000

  ip address 138.75.2.87 255.255.255.252
  mpls mtu 9000

$

interface cgei-0/1/0/1.2

   description to HEZJK-201J--1F-ZX9K3EA-SM-E2
  mtu 9050

  ip mtu 9000

  ip address 138.75.2.81 255.255.255.252
  mpls mtu 9000

$

interface cgei-0/1/0/1.1000

   description to HEZJK-201J-2F-ZX9K3EA-SM-E2
  mtu 9050

  ip mtu 9000

  ip address 138.75.0.121 255.255.255.252
  mpls mtu 9000

$

interface cgei-0/1/0/2

$

interface cgei-0/1/0/3

$

interface spi-0/1/0/1

$

interface xgei-0/1/1/1

$

interface xgei-0/1/1/2

$

interface xgei-0/1/1/3

$

interface xgei-0/1/1/4

$

interface xgei-0/1/1/5

$

interface xgei-0/1/1/6

$

interface xgei-0/1/1/7

$

interface xgei-0/1/1/8

$

interface xgei-0/1/1/9

$

interface xgei-0/1/1/10

$

interface xgei-0/1/1/11

$

interface xgei-0/1/1/12

$

interface xgei-0/1/1/13

$

interface xgei-0/1/1/14

$

interface xgei-0/1/1/15

$

interface xgei-0/1/1/16

$

interface xgei-0/1/1/17

$

interface xgei-0/1/1/18

$

interface xgei-0/1/1/19

$

interface xgei-0/1/1/20

$

interface xgei-0/1/1/21

$

interface xgei-0/1/1/22

$

interface xgei-0/1/1/23

$

interface xgei-0/1/1/24

$

interface spi-0/1/1/1

$

interface lgei-0/2/0/1

$

interface lgei-0/2/0/2

$

interface lgei-0/2/0/3

$

interface lgei-0/2/0/4

$

interface lgei-0/2/0/5

$

interface spi-0/2/0/1

$

interface spi-0/2/1/1

$

interface ptp-0/3/0/1

$

interface extimer-0/3/0/1

$

interface extimer-0/3/0/2

$

interface extimer-0/3/0/3

$

interface gps-0/3/0/1

$

interface qx_eth-0/3/0/1

$

interface ptp-0/4/0/1

$

interface extimer-0/4/0/1

$

interface extimer-0/4/0/2

$

interface extimer-0/4/0/3

$

interface gps-0/4/0/1

$

interface qx_eth-0/4/0/1

$

interface mgmt_eth

  ip address 158.124.0.1 255.255.255.0
  ipv6 address A888::0/64
$

interface loopback1

   description for-Qerekiqirx
  ip address 16.66.206.3 255.255.255.255
$

interface loopback100

  ip vrf forwarding SmartMAN_AUTO_ONLINE

  ip address 16.66.206.3 255.255.255.255
$

interface null1

$

interface qx1

$

interface xgei-0/0/1/1.4094

  ip unnumbered loopback100

$

interface xgei-0/0/1/2.4094

  ip unnumbered loopback100

$

!</if-intf>

!<port-physical-config>

interface cgei-0/0/0/1

  link-delay-down 200

  link-delay-up 2000

$

interface xgei-0/0/1/1

  link-delay-down 200

  link-delay-up 2000

$

interface xgei-0/0/1/2

  link-delay-down 200

  link-delay-up 2000

$

interface cgei-0/1/0/1

  link-delay-down 200

  link-delay-up 2000

$

!</port-physical-config>

!<switchvlan>

switchvlan-configuration

  vlan 1

  $

$

!</switchvlan>

!<vlan>

vlan-configuration

  interface cgei-0/0/0/1.1000

    encapsulation-dot1q 1000

  $

  interface xgei-0/0/1/1.1

    encapsulation-dot1q 1

  $

  interface xgei-0/0/1/2.2

    encapsulation-dot1q 2

  $

  interface xgei-0/0/1/22.1

    encapsulation-dot1q 1

  $

  interface cgei-0/1/0/1.1

    encapsulation-dot1q 1

  $

  interface cgei-0/1/0/1.2

    encapsulation-dot1q 2

  $

  interface cgei-0/1/0/1.1000

    encapsulation-dot1q 1000

  $

$

!</vlan>

!<ipv4-acl>

ipv4-access-list SNMP

  rule 10 permit 158.124.210.0 0.0.0.255
  rule 20 deny any

$

ipv4-access-list telnet

  rule 1 permit 138.75.0.0 0.0.255.255
  rule 2 permit 16.66.206.0 0.0.0.255
  rule 3 permit 141.211.6.62 0.0.0.0
  rule 4 permit 141.211.6.84 0.0.0.0
$

!</ipv4-acl>

!<label-mgr>

mpls label manage

  srgb-label-range 24000 43999

  static-label-range 16 23999

  static-label-range 44000 163839

$

!</label-mgr>

!<route-map>

route-map Access-mangement permit 10

  match ip address prefix-list Access-mangement

$

route-map FROM_MCR1_LP permit 10

  set local-preference 100

$

route-map FROM_MCR2_LP permit 10

  set local-preference 50

$

route-map NMSandSDN_IP permit 10

  match ip address prefix-list NMSandSDN_IP

$

route-map SET_DEF_ROUTE_v6 permit 10

  set community 64500:1000

$

route-map SmartMAN_AUTO_ONLINE_IN permit 5

  match ip address prefix-list SmartMAN_AUTO_ONLINE_IN

$

route-map TO_RingISIS1_OUT permit 5

  match community-list name defaultroute

$

route-map TO_RingISIS1_OUT permit 10

  match extcommunity-list name RingISIS1

$

route-map TO_RingISIS2_OUT permit 5

  match community-list name defaultroute

$

route-map TO_RingISIS2_OUT permit 10

  match extcommunity-list name RingISIS2

$

route-map customer permit 10

  match evpn-route-type 1

  match evpn-route-type 2

  match evpn-route-type 3

  set next-hop 16.66.206.3
$

route-map default-community permit 10

  set community 64500:1000

$

route-map defaultdeny deny 10

  match community-list name defaultroute

$

route-map defaultdeny permit 20

$

!</route-map>

!<system-user>

enable secret level 15 5 $5$kbBWjiQa6nzb6hU3$fQBH43AI8tVI7kjiug.M22cIIOL9scbVs60

sev2a4Y.

system-user

  authorization-template 1

    bind aaa-authorization-template 2001

  $

  authorization-template 2

    bind aaa-authorization-template 2002

    local-privilege-level 2

  $

  authentication-template 1

    bind aaa-authentication-template 2001

  $

  authentication-template 2

    bind aaa-authentication-template 2002

  $

  default-privilege-level 15

  user-name HE-ZJK-Manager

    bind authentication-template 2

    bind authorization-template 2

     password encrypted df497cc7707bf83a355e6d07c6aa65b9
f5c59ee4b0

  $

  user-name HE-ZJK-SDNcontroller

    bind authentication-template 1

    bind authorization-template 1

     password encrypted df497cc7707bf83a355e6d07c6aa65b9
f5c59ee4b0

  $

  user-name he_wgtest

    bind authentication-template 1

    bind authorization-template 1

     password encrypted 284bd2295a193ed60efac2fa3b2ea6a2
c93603007a

  $

$

!</system-user>

!<community-list>

ip community-list advanced defaultroute 10 permit 64500:1000

!</community-list>

!<prefix-list>

ip prefix-list 501 seq 5 permit 16.66.206.155 32
ip prefix-list 502 seq 5 permit 16.66.206.155 32
ip prefix-list 505 seq 5 permit 16.66.206.155 32
ip prefix-list Access-mangement seq 1 permit 16.66.206.0 20 le 32
ip prefix-list NMSandSDN_IP seq 10 permit 141.211.6.62 32
ip prefix-list NMSandSDN_IP seq 15 permit 141.211.6.0 24
ip prefix-list NMSandSDN_IP seq 16 permit 158.124.210.0 24 le 32
ip prefix-list NMSandSDN_IP seq 17 permit 16.206.38.60 29 le 32
ip prefix-list NMSandSDN_IP seq 20 permit 141.211.6.84 32
ip prefix-list SmartMAN_AUTO_ONLINE_IN seq 5 permit 16.206.39.52 29 le 32
ip prefix-list SmartMAN_AUTO_ONLINE_IN seq 10 permit 16.206.39.38 29 le 32
ip prefix-list defaultv4 seq 5 permit 0.0.0.0 0
ip prefix-list sbfd seq 1 permit 16.66.207.11 32
ip prefix-list sbfd seq 2 permit 16.66.207.12 32
ip prefix-list sbfd seq 3 permit 16.66.207.13 32
ip prefix-list sbfd seq 4 permit 16.66.207.14 32
ip prefix-list sbfd seq 5 permit 16.66.207.15 32
ip prefix-list sbfd seq 6 permit 16.66.207.26 32
ip prefix-list sbfd seq 7 permit 16.66.207.27 32
ip prefix-list sbfd seq 8 permit 16.66.207.28 32
ip prefix-list sbfd seq 9 permit 16.66.207.29 32
ip prefix-list sbfd seq 10 permit 16.66.207.34 32
ip prefix-list sbfd seq 11 permit 16.66.207.40 32
ip prefix-list sbfd seq 12 permit 16.66.207.41 32
ip prefix-list sbfd seq 13 permit 16.66.207.42 32
ip prefix-list sbfd seq 14 permit 16.66.207.43 32
ip prefix-list sbfd seq 15 permit 16.66.207.44 32
ip prefix-list sbfd seq 16 permit 16.66.207.45 32
ip prefix-list sbfd seq 17 permit 16.66.207.56 32
ip prefix-list sbfd seq 18 permit 16.66.207.57 32
ip prefix-list sbfd seq 19 permit 16.66.207.58 32
ipv6 prefix-list 500 seq 5 permit AC80:09A8:2B87:7888::911/128
ipv6 prefix-list 503 seq 5 permit AC80:09A8:2B87:7888::911/128
ipv6 prefix-list 504 seq 5 permit AC80:09A8:2B87:7888::911/128
ipv6 prefix-list defaultv6 seq 5 permit ::/0
!</prefix-list>

!<ptp>

ptp

  enable

  announce-interval -3

  domain 24

  state-algorithm alternate-bmc

  utc-trace auto holdover 24

  fixed-mode

  $

  free-mode

    port interface cgei-0/0/0/1 portnum 2

      enable

      sync-interval -4

      delay-req-interval -4

    $

    port interface cgei-0/1/0/1 portnum 3

      enable

      sync-interval -4

      delay-req-interval -4

    $

    port interface xgei-0/0/1/1 portnum 4

      enable

      sync-interval -4

      delay-req-interval -4

    $

    port interface xgei-0/0/1/2 portnum 5

      enable

      sync-interval -4

      delay-req-interval -4

    $

  $

$

interface cgei-0/0/0/1

  ptp enable

  ptp unsymmetrical-offset 0 negative

$

interface cgei-0/1/0/1

  ptp enable

  ptp unsymmetrical-offset 0 negative

$

interface xgei-0/0/1/2

  ptp enable

  ptp unsymmetrical-offset 0 negative

$

interface xgei-0/0/1/1

  ptp enable

  ptp unsymmetrical-offset 0 negative

$

!</ptp>

!<samgr>

samgr

  track 501 prefix-list ipv4 prefix-name 501 vrf 4G_RAN

  track 505 prefix-list ipv4 prefix-name 505 vrf 4G_OAM

  track 500 prefix-list ipv6 prefix-name 500 vrf 5G_RAN

  track 503 prefix-list ipv6 prefix-name 503 vrf 5G_RAN_VIP

  track 504 prefix-list ipv6 prefix-name 504 vrf 5G_OAM

  track 502 prefix-list ipv4 prefix-name 502 vrf 3G_RAN

$

!</samgr>

!<ssmclock>

ssm

  usessm

  synchronization-clock line cgei-0/1/0/1

  synchronization-clock line cgei-0/0/0/1

  priority line cgei-0/1/0/1 2

  priority line cgei-0/0/0/1 1

$

!</ssmclock>

!<aaa>

aaa-authentication-template 2001

  aaa-authentication-type local

$

aaa-authentication-template 2002

  aaa-authentication-type local

$

aaa-authorization-template 2001

  aaa-authorization-type none

$

aaa-authorization-template 2002

  aaa-authorization-type radius-local

$

!</aaa>

!<extcommunity-list>

ip extcommunity-list basic RingISIS1 10 permit rt-trans 64520:1001001

ip extcommunity-list basic RingISIS2 10 permit rt-trans 64520:1001002

!</extcommunity-list>

!<lldp>

lldp

  basic-tlv management-address-tlv ipv4 16.66.206.3
$

!</lldp>

!<stp>

spantree

$

!</stp>

!<oam_snetconf>

snetconf server enable

!</oam_snetconf>

!<oam_netconf>

line netconf idle-timeout 0

netconf agent enable

!</oam_netconf>

!<segment-routing>

segment-routing

  ipv4-mpls prefix-sid 16.66.206.3/32 index 13 node-flag
  sbfd sr-be auto-create ipv4 prefix-list sbfd source 16.66.206.3
$

!</segment-routing>

!<oam>

privilege show all level 2 show

!</oam>

!<alarm>

alarm preload-mode interface xgei-0/0/1/3 autorecover

logging file default almlog

  accept on

$

logging file default cmdlog

  buffer 1000

$

logging file default netclog

  accept on

$

logging file default snmplog

  accept on

$

logging file default srvlog

  accept on

  interval 10

$

logging file default weblog

  accept on

$

logging snmp

  accept on

  match cmdlog

$

!</alarm>

!<ftp>

ftp-client source-interface loopback1

!</ftp>

!<snmp>

snmp-server community encrypted d8ccb602e7c1e6fba130a06c4eb87409f359e4e2c21ff7cb

cfe5de3209e87a42 view lldpview ro ipv4-access-list SNMP 

snmp-server community encrypted d8ccb602e7c1e6fb7cb0fe93d1ddc9988d5581f785989a1e

f528d4b3cb358d53 view lldpview rw 

snmp-server enable inform snmp

snmp-server enable inform bgp

snmp-server enable inform mac

snmp-server enable inform ospf

snmp-server enable inform stp

snmp-server enable inform ppp

snmp-server enable inform arp

snmp-server enable inform rmon

snmp-server enable inform udld

snmp-server enable inform cfm

snmp-server enable inform efm

snmp-server enable inform lacp

snmp-server enable inform mc-elam

snmp-server enable inform tcp

snmp-server enable inform sctp

snmp-server enable inform stalarm

snmp-server enable inform cps

snmp-server enable inform interface

snmp-server enable inform acl

snmp-server enable inform fib

snmp-server enable inform pim

snmp-server enable inform isis

snmp-server enable inform rip

snmp-server enable inform msdp

snmp-server enable inform aps

snmp-server enable inform config

snmp-server enable inform am

snmp-server enable inform um

snmp-server enable inform system

snmp-server enable inform ldp

snmp-server enable inform pwe3

snmp-server enable inform vpn

snmp-server enable inform mpls-oam

snmp-server enable inform ptp

snmp-server enable inform tunnel-te

snmp-server enable inform radius

snmp-server enable inform dhcp

snmp-server enable inform bfd

snmp-server enable inform ippool

snmp-server enable inform ntp

snmp-server enable inform ssm

snmp-server enable inform sqa

snmp-server enable inform ipsec

snmp-server enable inform cgn

snmp-server enable inform vrrp

snmp-server enable inform ftp_tftp

snmp-server enable inform ping-trace

snmp-server enable inform gm

snmp-server enable trap snmp

snmp-server enable trap bgp

snmp-server enable trap mac

snmp-server enable trap ospf

snmp-server enable trap stp

snmp-server enable trap ppp

snmp-server enable trap arp

snmp-server enable trap rmon

snmp-server enable trap udld

snmp-server enable trap cfm

snmp-server enable trap efm

snmp-server enable trap lacp

snmp-server enable trap mc-elam

snmp-server enable trap tcp

snmp-server enable trap sctp

snmp-server enable trap stalarm

snmp-server enable trap cps

snmp-server enable trap interface

snmp-server enable trap acl

snmp-server enable trap fib

snmp-server enable trap pim

snmp-server enable trap isis

snmp-server enable trap rip

snmp-server enable trap msdp

snmp-server enable trap aps

snmp-server enable trap config

snmp-server enable trap am

snmp-server enable trap um

snmp-server enable trap system

snmp-server enable trap ldp

snmp-server enable trap pwe3

snmp-server enable trap vpn

snmp-server enable trap mpls-oam

snmp-server enable trap ptp

snmp-server enable trap tunnel-te

snmp-server enable trap radius

snmp-server enable trap dhcp

snmp-server enable trap bfd

snmp-server enable trap ippool

snmp-server enable trap ntp

snmp-server enable trap ssm

snmp-server enable trap sqa

snmp-server enable trap ipsec

snmp-server enable trap cgn

snmp-server enable trap vrrp

snmp-server enable trap ftp_tftp

snmp-server enable trap ping-trace

snmp-server enable trap gm

snmp-server host 158.124.210.35 trap version 2c encrypted d6ddeaa4dab74523b246fe
346c94c31ae58b79ad4776396438ea1e9bb01a9ef3 udp-port 165 snmp bgp mac ospf stp pp

p arp rmon udld cfm efm lacp mc-elam tcp sctp stalarm cps interface acl fib pim 

isis rip msdp aps config am um system ldp pwe3 vpn mpls-oam ptp tunnel-te radius

 dhcp bfd ippool ntp

snmp-server host 158.124.210.35 trap version 2c encrypted d6ddeaa4dab74523b246fe
346c94c31ae58b79ad4776396438ea1e9bb01a9ef3 udp-port 165 ssm sqa ipsec cgn vrrp f

tp_tftp ping-trace gm

snmp-server trap-source 16.66.206.3
snmp-server view lldpview iso included

snmp-server view n31view iso included

snmp-server version v2c enable

!</snmp>

!<telnet>

line telnet absolute-timeout 0

line telnet idle-timeout 0

!</telnet>

!<bfd>

bfd

  sbfd

    reflector source ipv4 16.66.206.3
    reflector-discriminator ip 16.66.206.3
  $

$

!</bfd>

!<ipv6-static-route>

ipv6 route vrf 5G_OAM ::/0 null1 track 504
ipv6 route vrf 5G_RAN ::/0 null1 track 500
ipv6 route vrf 5G_RAN_VIP ::/0 null1 track 503
!</ipv6-static-route>

!<bgp>

router bgp 64520

  synchronization disable

  bgp router-id 16.66.206.3
  bgp bestpath virtual-spoke

  neighbor RingISIS1 peer-group

  neighbor RingISIS1 remote-as 64520

  neighbor RingISIS1 activate disable

  neighbor RingISIS1 update-source loopback1

  neighbor RingISIS1 fall-over bfd interval 50 min-rx 50 multiplier 3

   neighbor RingISIS1 password encrypted 5d5a0a88a18d1ab7a80a8e3228d2b7f0
lzZHOZOJz6NNUrnmiXr+g4BVOfxyo4MMjUjSqmkII45B5ev4YW2TqeAdx5ftHKiwkCw=

  neighbor RingISIS2 peer-group

  neighbor RingISIS2 remote-as 64520

  neighbor RingISIS2 activate disable

  neighbor RingISIS2 update-source loopback1

  neighbor RingISIS2 fall-over bfd interval 50 min-rx 50 multiplier 3

   neighbor RingISIS2 password encrypted 5d5a0a88a18d1ab7a80a8e3228d2b7f0
lzZHOZOJz6NNUrnmiXr+g4BVOfxyo4MMjUjSqmkII45B5ev4YW2TqeAdx5ftHKiwkCw=

  neighbor 16.66.206.1 remote-as 64520
  neighbor 16.66.206.1 activate disable
  neighbor 16.66.206.1 update-source loopback1
  neighbor 16.66.206.1 fall-over bfd interval 50 min-rx 50 multiplier 3
   neighbor 16.66.206.1 password encrypted fbba1faf3260400fecec62ae5ba8a592
YblzZHOZOJz6NNUrnmiXr+g4BVOfxyo4MMjUjSqmkII45B5ev4YW2TqeAdx5ftHKiwkCw=

  neighbor 16.66.206.2 remote-as 64520
  neighbor 16.66.206.2 activate disable
  neighbor 16.66.206.2 update-source loopback1
  neighbor 16.66.206.2 fall-over bfd interval 50 min-rx 50 multiplier 3
   neighbor 16.66.206.2 password encrypted fbba1faf3260400fecec62ae5ba8a592
YblzZHOZOJz6NNUrnmiXr+g4BVOfxyo4MMjUjSqmkII45B5ev4YW2TqeAdx5ftHKiwkCw=

  neighbor 16.66.207.11 remote-as 64520
  neighbor 16.66.207.11 peer-group RingISIS1
  neighbor 16.66.207.12 remote-as 64520
  neighbor 16.66.207.12 peer-group RingISIS1
  neighbor 16.66.207.13 remote-as 64520
  neighbor 16.66.207.13 peer-group RingISIS1
  neighbor 16.66.207.14 remote-as 64520
  neighbor 16.66.207.14 peer-group RingISIS1
  neighbor 16.66.207.15 remote-as 64520
  neighbor 16.66.207.15 peer-group RingISIS1
  neighbor 16.66.207.26 remote-as 64520
  neighbor 16.66.207.26 peer-group RingISIS2
  neighbor 16.66.207.27 remote-as 64520
  neighbor 16.66.207.27 peer-group RingISIS2
  neighbor 16.66.207.28 remote-as 64520
  neighbor 16.66.207.28 peer-group RingISIS2
  neighbor 16.66.207.29 remote-as 64520
  neighbor 16.66.207.29 peer-group RingISIS2
  neighbor 16.66.207.34 remote-as 64520
  neighbor 16.66.207.34 peer-group RingISIS1
  neighbor 16.66.207.40 remote-as 64520
  neighbor 16.66.207.40 peer-group RingISIS1
  neighbor 16.66.207.41 remote-as 64520
  neighbor 16.66.207.41 peer-group RingISIS1
  neighbor 16.66.207.42 remote-as 64520
  neighbor 16.66.207.42 peer-group RingISIS1
  neighbor 16.66.207.43 remote-as 64520
  neighbor 16.66.207.43 peer-group RingISIS1
  neighbor 16.66.207.44 remote-as 64520
  neighbor 16.66.207.44 peer-group RingISIS1
  neighbor 16.66.207.45 remote-as 64520
  neighbor 16.66.207.45 peer-group RingISIS1
  neighbor 16.66.207.56 remote-as 64520
  neighbor 16.66.207.56 peer-group RingISIS1
  neighbor 16.66.207.57 remote-as 64520
  neighbor 16.66.207.57 peer-group RingISIS2
  neighbor 16.66.207.58 remote-as 64520
  neighbor 16.66.207.58 peer-group RingISIS2
  address-family ipv4 vrf SmartMAN_AUTO_ONLINE

    redistribute ospf-int 1000

    redistribute connected

  $

  address-family ipv4 vrf 4G_RAN

    bgp frr

    network 0.0.0.0 0.0.0.0 route-map default-community
  $

  address-family ipv4 vrf 4G_OAM

    bgp frr

    network 0.0.0.0 0.0.0.0 route-map default-community
  $

  address-family ipv4 vrf 3G_RAN

    bgp frr

    network 0.0.0.0 0.0.0.0 route-map default-community
  $

  address-family l2vpn evpn

    neighbor RingISIS1 activate

    neighbor RingISIS1 route-reflector-client

    neighbor RingISIS1 virtual-spoke reflect-next-hop-self

    neighbor RingISIS1 route-map customer out

    neighbor RingISIS2 activate

    neighbor RingISIS2 route-reflector-client

    neighbor RingISIS2 virtual-spoke reflect-next-hop-self

    neighbor RingISIS2 route-map customer out

    neighbor 16.66.206.1 activate
    neighbor 16.66.206.1 route-map FROM_MCR1_LP in
    neighbor 16.66.206.2 activate
    neighbor 16.66.206.2 route-map FROM_MCR2_LP in
  $

  address-family vpnv4

    neighbor RingISIS1 activate

    neighbor RingISIS1 send-community

    neighbor RingISIS1 virtual-spoke reflect-next-hop-self

    neighbor RingISIS1 route-filter-group ISIS1

    neighbor RingISIS1 route-map TO_RingISIS1_OUT out

    neighbor RingISIS2 activate

    neighbor RingISIS2 send-community

    neighbor RingISIS2 virtual-spoke reflect-next-hop-self

    neighbor RingISIS2 route-filter-group ISIS2

    neighbor RingISIS2 route-map TO_RingISIS2_OUT out

    neighbor 16.66.206.1 activate
    neighbor 16.66.206.1 send-community
    neighbor 16.66.206.1 route-map FROM_MCR1_LP in
    neighbor 16.66.206.1 route-map defaultdeny out
    neighbor 16.66.206.2 activate
    neighbor 16.66.206.2 send-community
    neighbor 16.66.206.2 route-map FROM_MCR2_LP in
    neighbor 16.66.206.2 route-map defaultdeny out
  $

  address-family ipv6 vrf 5G_RAN

    bgp frr

    bgp frr wtr 5

    network ::/0 route-map SET_DEF_ROUTE_v6
  $

  address-family ipv6 vrf 5G_OAM

    bgp frr

    network ::/0 route-map SET_DEF_ROUTE_v6
  $

  address-family ipv6 vrf 5G_RAN_VIP

    bgp frr

    network ::/0 route-map SET_DEF_ROUTE_v6
  $

  address-family vpnv6

    neighbor RingISIS1 activate

    neighbor RingISIS1 send-community

    neighbor RingISIS1 virtual-spoke reflect-next-hop-self

    neighbor RingISIS1 route-filter-group ISIS1

    neighbor RingISIS1 route-map TO_RingISIS1_OUT out

    neighbor RingISIS2 activate

    neighbor RingISIS2 send-community

    neighbor RingISIS2 virtual-spoke reflect-next-hop-self

    neighbor RingISIS2 route-filter-group ISIS2

    neighbor RingISIS2 route-map TO_RingISIS2_OUT out

    neighbor 16.66.206.1 activate
    neighbor 16.66.206.1 send-community
    neighbor 16.66.206.1 route-map FROM_MCR1_LP in
    neighbor 16.66.206.1 route-map defaultdeny out
    neighbor 16.66.206.2 activate
    neighbor 16.66.206.2 send-community
    neighbor 16.66.206.2 route-map FROM_MCR2_LP in
    neighbor 16.66.206.2 route-map defaultdeny out
  $

$

!</bgp>

!<isis>

router isis 1000

  area 86.4520.1000

  system-id 0100.6024.0003

  router-id 16.66.206.3
  is-type level-2-only

  metric-style wide

  fast-flood 5

  fast-reroute ti-lfa sr-mpls

  i-spf

  lsp-gen-interval 1 50 50

  spf-interval 1 50 50

  maximum-paths 8

  microloop-prevention segment-routing delay-time 30000

  microloop-prevention segment-routing mpls enable

  mpls traffic-eng level-2

  redistribute isis 1 metric 10000 route-map Access-mangement without-prefix-sid

  redistribute isis 2 metric 10000 route-map Access-mangement without-prefix-sid

  restart enable

  segment-routing mpls enable

  set-overload-bit on-start-up 300

  interface cgei-0/0/0/1.1000

    ip router isis

    bfd-enable

    bfd-time-negotiation min-tx 10 min-rx 10 multiplier 3

    circuit-type level-2-only

    metric 100 level-2

    network point-to-point

    authentication-type hmac-md5

    authentication encrypted obe6VKWeEOt5pEKCxZ3VRQ==

    link-damped adj-establish enable

    link-damped metric increase 3000

  $

  interface cgei-0/1/0/1.1000

    ip router isis

    bfd-enable

    bfd-time-negotiation min-tx 10 min-rx 10 multiplier 3

    circuit-type level-2-only

    metric 100 level-2

    network point-to-point

    authentication-type hmac-md5

    authentication encrypted obe6VKWeEOt5pEKCxZ3VRQ==

  $

  interface loopback1

    ip router isis

    circuit-type level-2-only

    passive-mode

  $

$

router isis 1

  area 86.4520.1000

  system-id 0200.6024.0003

  router-id 16.66.206.3
  is-type level-2-only

  metric-style wide

  fast-flood 5

  fast-reroute ti-lfa sr-mpls

  i-spf

  lsp-gen-interval 1 50 50

  spf-interval 1 50 50

  maximum-paths 8

  microloop-prevention segment-routing delay-time 30000

  microloop-prevention segment-routing mpls enable

  mpls traffic-eng level-2

  redistribute isis 1000 metric 10000 route-map NMSandSDN_IP without-prefix-sid

  restart enable

  segment-routing mpls enable

  set-overload-bit on-start-up 300

  interface xgei-0/0/1/1.1

    ip router isis

    bfd-enable

    bfd-time-negotiation min-tx 10 min-rx 10 multiplier 3

    circuit-type level-2-only

    metric 100 level-2

    network point-to-point

    authentication-type hmac-md5

    authentication encrypted obe6VKWeEOt5pEKCxZ3VRQ==

  $

  interface cgei-0/1/0/1.1

    ip router isis

    bfd-enable

    bfd-time-negotiation min-tx 10 min-rx 10 multiplier 3

    circuit-type level-2-only

    metric 2000 level-2

    network point-to-point

    authentication-type hmac-md5

    authentication encrypted obe6VKWeEOt5pEKCxZ3VRQ==

  $

  interface loopback1

    ip router isis

    circuit-type level-2-only

    passive-mode

  $

  interface xgei-0/0/1/22.1

    ip router isis

    bfd-enable

    bfd-time-negotiation min-tx 10 min-rx 10 multiplier 3

    circuit-type level-2-only

    metric 100 level-2

    network point-to-point

    authentication-type hmac-md5

    authentication encrypted obe6VKWeEOt5pEKCxZ3VRQ==

  $

$

router isis 2

  area 86.4520.1000

  system-id 0300.6024.0003

  router-id 16.66.206.3
  is-type level-2-only

  metric-style wide

  fast-flood 5

  fast-reroute ti-lfa sr-mpls

  i-spf

  lsp-gen-interval 1 50 50

  spf-interval 1 50 50

  maximum-paths 8

  microloop-prevention segment-routing delay-time 30000

  microloop-prevention segment-routing mpls enable

  mpls traffic-eng level-2

  redistribute isis 1000 metric 10000 route-map NMSandSDN_IP without-prefix-sid

  restart enable

  segment-routing mpls enable

  set-overload-bit on-start-up 300

  interface xgei-0/0/1/2.2

    ip router isis

    bfd-enable

    bfd-time-negotiation min-tx 10 min-rx 10 multiplier 3

    circuit-type level-2-only

    metric 100 level-2

    network point-to-point

    authentication-type hmac-md5

    authentication encrypted obe6VKWeEOt5pEKCxZ3VRQ==

  $

  interface cgei-0/1/0/1.2

    ip router isis

    bfd-enable

    bfd-time-negotiation min-tx 10 min-rx 10 multiplier 3

    circuit-type level-2-only

    metric 2000 level-2

    network point-to-point

    authentication-type hmac-md5

    authentication encrypted obe6VKWeEOt5pEKCxZ3VRQ==

  $

  interface loopback1

    ip router isis

    circuit-type level-2-only

    passive-mode

  $

$

!</isis>

!<ospfv2>

router ospf 1000 vrf SmartMAN_AUTO_ONLINE

  area 0.0.0.0
    network 16.66.206.3 0.0.0.0
  $

  interface loopback100

  $

  redistribute bgp-int route-map SmartMAN_AUTO_ONLINE_IN

  router-id 16.66.206.3
$

!</ospfv2>

!<static>

ip route vrf 4G_OAM 0.0.0.0 0.0.0.0 null1 track 505
ip route vrf 4G_RAN 0.0.0.0 0.0.0.0 null1 track 501
ip route vrf 3G_RAN 0.0.0.0 0.0.0.0 null1 track 502
!</static>

!<load-sharing>

load-sharing hash-fields mpls ip-l4

load-sharing hash-fields mpls l2

!</load-sharing>

